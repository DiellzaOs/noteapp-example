<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>    
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

    <title>All notes</title>
    <style>
        li a{
            text-decoration: none;
            color: black;
        }
        #notesTitle{
            background-color: rgb(51, 51, 51);
            color: white;
            border-color: none;
        }
        body{
            background: #00d2ff; 
            background: -webkit-linear-gradient(to right, #3a7bd5, #00d2ff); 
            background: linear-gradient(to right, #3a7bd5, #00d2ff); 
        }

        button#pin, #removePin {
        float: right;
        cursor: pointer;
        text-decoration: underline;
        margin-left: 5px;
      }
      /* #removePin{
        display: none;
      
      }
       */
     

    </style>
</head>

<body>
  
  <%- include('../partials/head') %>

      <!-- <div class="card">
        <div class="card-body">
          
        </div>
      </div> -->
      
    <div class="container mt-5">
        <div class="col-md-4 col-md-offset-3 mx-auto">
          <div class="card border-0" id="pinnedTasks"></div>
            <div class="card border-0">
                <div class="card-body" id="notesTitle">
                    <h5 class="card-title"><%= category%> Notes</h5>
                    <p class="card-text">Click any note to edit</p>
                </div>
                
                  <ul class="list-group list-group-flush" id="productItems">
                    <% for(let i=0; i<products.length; i++) { %>
                      <li class="list-group-item item" id="prod-<%=i%>"><a href="/products/<%=products[i]._id%>"><b><%= products[i].title %></b></a>
                        
                        <button class="btn btn-success" id="pin" type="submit" onclick="prependFunc('prod-' + '<%= i %>')"><i class="fas fa-thumbtack"></i></button>
                        <button type="submit" id="removePin"  class="btn btn-danger" onclick="removeFunc('prod-' + '<%= i%>')"><i class="fas fa-thumbtack"></i></button>

                      </li>
                    <% }%>
                </ul>
                
                  <div class="card-body">
                    <a href="/products/new" class="btn btn-success">Add New Note</a>
                  </div>
                </div>
            </div>
        </div>
    </div>
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script type="text/javascript">
        //pin function
      //  function PinButton(){
      //   let element = document.getElementById("removePin").disabled = true;
      //  }
      //  function removePinButton(){
      //   let element = document.getElementById("removePin").disabled = false;
      //  }
      const orderList = getElementById("productItems");
      orderList.sort

        function prependFunc(docId){
       
          const select = document.querySelector('#' + docId);
          const prePend = document.getElementById('pinnedTasks').appendChild(select);  
          prePend.style.backgroundColor ="lightgreen";
          
          // let removeBtn = document.getElementById("removePin");
          // removeBtn.addEventListener('click',PinButton);
          //removeBtn.addEventListener('click',removePinButton);

          //element.classList.remove("removePin");
          //let element = document.getElementById("removePin");
          //element.classList.add("removePin");
          
        }

        //remove pin function
        function removeFunc(docId){
          const select = document.querySelector('#' + docId);
          const prePend = document.getElementById('pinnedTasks')
          const pinned = document.getElementById('pinnedTasks').cloneNode(true);
          document.getElementById('productItems').appendChild(select);
          select.style.backgroundColor="";
          //$("#removePin").prop('disabled', true);
          //removeBtn.addEventListener('click',removePinButton);
          //let removeBtn = document.getElementById("removePin");
          //removeBtn.addEventListener('click', removePinButton);
          //let element = document.querySelector("#removePin").disabled = true;
          //pinned.removeChild(prePend.childNodes[0]);
          //document.getElementById("removePin").disabled=true;
          
        }
        
   </script>
</body>
</html>